{"version":3,"file":"main.bundle.js","mappings":"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","sources":["webpack://keksobooking/./source/js/page-load.js","webpack://keksobooking/./source/js/filter-ads.js","webpack://keksobooking/./source/js/fetch.js","webpack://keksobooking/./source/js/notice.js","webpack://keksobooking/./source/js/validation.js","webpack://keksobooking/./source/js/file-upload.js","webpack://keksobooking/./source/js/form.js","webpack://keksobooking/./source/js/util.js","webpack://keksobooking/./source/js/map.js","webpack://keksobooking/./source/js/offer.js"],"sourcesContent":["const disablePage = (itemClass) => {\n  const item = document.querySelector(`.${itemClass}`);\n\n  item.classList.add(`${itemClass}--disabled`);\n  for (let child of item.children) {\n    child.setAttribute('disabled', 'true');\n  }\n}\n\nconst enablePage = (itemClass) => {\n  const item = document.querySelector(`.${itemClass}`);\n\n  item.classList.remove(`${itemClass}--disabled`);\n  for (let child of item.children) {\n    child.removeAttribute('disabled');\n  }\n}\n\ndisablePage('ad-form');\ndisablePage('map__filters');\n\nexport {disablePage, enablePage};\n\n","import { createMarkers, addMarkers, removeMarkers } from './map.js';\n\nconst getArrayOfDuplicates = (array1, array2) => {\n  return array1.filter(item => array2.includes(item));\n};\n\n\nconst filterAds = (newArray) => {\n  const form = document.querySelector('.map__filters');\n  const RENDER_DELAY = 1000;\n  let housingTypeArray = newArray;\n  let housingPriceArray = newArray;\n  let housingRoomsArray = newArray;\n  let housingGuestsArray = newArray;\n  let housingWithWifi = newArray;\n  let housingWithDishwasher = newArray;\n  let housingWithParking = newArray;\n  let housingWithWasher = newArray;\n  let housingWithElevator = newArray;\n  let housingWithConditioner = newArray;\n  let generalArrayOfFeatures = newArray;\n  let totalArray = [];\n  let featuresArray = [];\n  let result = [];\n\n\n\n  const setMarkers = (cb) => {\n    form.addEventListener('change', (evt) => {\n\n      const filterCurrentFeatures = (array, feature) => {\n        array = newArray.filter(item => {\n          if (item.offer.features) {\n            return item.offer.features.includes(feature);\n          }\n        });\n        return array;\n      };\n\n      const removeArray = (array, baseArray) => {\n        const index = baseArray.indexOf(array);\n        baseArray.splice(index, 1);\n      }\n\n      switch (evt.target.id) {\n        case 'housing-type':\n          if (totalArray.includes(housingTypeArray)) {\n            removeArray(housingTypeArray, totalArray);\n          }\n\n          if (evt.target.value !== 'any') {\n            housingTypeArray = newArray.filter(\n              item => (item.offer.type == evt.target.value),\n            );\n            totalArray.push(housingTypeArray);\n          }\n\n          break;\n\n        case 'housing-price':\n          if (totalArray.includes(housingPriceArray)) {\n            removeArray(housingPriceArray, totalArray);\n          }\n\n          if (evt.target.value !== 'any') {\n            housingPriceArray = newArray.filter(\n              item => {\n                switch (evt.target.value) {\n                  case 'low':\n                    return item.offer.price < 10000;\n\n                  case 'middle':\n                    return item.offer.price >= 10000 && item.offer.price <= 50000;\n\n                  case 'high':\n                    return item.offer.price > 50000;\n                }\n              });\n\n            totalArray.push(housingPriceArray);\n          }\n\n          break;\n\n        case 'housing-rooms':\n          if (totalArray.includes(housingRoomsArray)) {\n            removeArray(housingRoomsArray, totalArray);\n          }\n\n          if (evt.target.value !== 'any') {\n            housingRoomsArray = newArray.filter(\n              item => (item.offer.rooms >= evt.target.value),\n            );\n\n            totalArray.push(housingRoomsArray);\n          }\n\n          break;\n\n        case 'housing-guests':\n          if (totalArray.includes(housingGuestsArray)) {\n            removeArray(housingGuestsArray, totalArray);\n          }\n\n          if (evt.target.value !== 'any') {\n            housingGuestsArray = newArray.filter(\n              item => (item.offer.guests >= evt.target.value),\n            );\n\n            totalArray.push(housingGuestsArray);\n          }\n          break;\n\n        default:\n\n          if (totalArray.includes(generalArrayOfFeatures)) {\n            removeArray(generalArrayOfFeatures, totalArray);\n          }\n\n          switch (evt.target.value) {\n            case 'wifi':\n              if (evt.target.matches(':checked')) {\n                housingWithWifi = filterCurrentFeatures(housingWithWifi, 'wifi');\n                featuresArray.push(housingWithWifi);\n              } else {\n                removeArray(housingWithWifi, featuresArray);\n              }\n              break;\n\n            case 'dishwasher':\n              if (evt.target.matches(':checked')) {\n                housingWithDishwasher = filterCurrentFeatures(housingWithDishwasher, 'dishwasher');\n                featuresArray.push(housingWithDishwasher);\n              } else {\n                removeArray(housingWithDishwasher, featuresArray);\n              }\n              break;\n\n            case 'parking':\n              if (evt.target.matches(':checked')) {\n                housingWithParking = filterCurrentFeatures(housingWithParking, 'parking');\n                featuresArray.push(housingWithParking);\n              } else {\n                removeArray(housingWithParking, featuresArray);\n              }\n              break;\n\n            case 'washer':\n              if (evt.target.matches(':checked')) {\n                housingWithWasher = filterCurrentFeatures(housingWithWasher, 'washer');\n                featuresArray.push(housingWithWasher);\n              } else {\n                removeArray(housingWithWasher, featuresArray);\n              }\n              break;\n\n            case 'elevator':\n              if (evt.target.matches(':checked')) {\n                housingWithElevator = filterCurrentFeatures(housingWithElevator, 'elevator');\n                featuresArray.push(housingWithElevator);\n              } else {\n                removeArray(housingWithElevator,featuresArray);\n              }\n              break;\n\n            case 'conditioner':\n              if (evt.target.matches(':checked')) {\n                housingWithConditioner = filterCurrentFeatures(housingWithConditioner, 'conditioner');\n                featuresArray.push(housingWithConditioner);\n              } else {\n                removeArray(housingWithConditioner, featuresArray);\n              }\n              break;\n          }\n\n          if (featuresArray.length === 1) {\n            generalArrayOfFeatures = featuresArray[0];\n            totalArray.push(generalArrayOfFeatures);\n          }\n\n          if (featuresArray.length > 1) {\n            let brokerArray = featuresArray[0];\n\n            featuresArray.slice(1).forEach(item => {\n              brokerArray = getArrayOfDuplicates(brokerArray, item);\n            });\n\n            generalArrayOfFeatures = brokerArray;\n            totalArray.push(generalArrayOfFeatures);\n          }\n      }\n\n      if (totalArray.length === 0) {\n        result = newArray;\n      }\n\n      if (totalArray.length === 1) {\n        result = totalArray[0];\n      }\n\n      if (totalArray.length > 1) {\n        let brokerArray = totalArray[0];\n        totalArray.slice(1).forEach(item => {\n          brokerArray = getArrayOfDuplicates(brokerArray, item);\n        });\n        result = brokerArray;\n      }\n\n      cb();\n    });\n\n  };\n\n\n\n  const prepareMarkers = () => {\n    let markers = createMarkers(result.slice(0, 10));\n    removeMarkers();\n    addMarkers(markers);\n  };\n\n  setMarkers(_.debounce(() => prepareMarkers(), RENDER_DELAY));\n\n\n};\n\nexport { filterAds };\n","import { createMarkers, addMarkers } from './map.js';\nimport { enablePage } from './page-load.js';\nimport { filterAds } from './filter-ads.js';\n\n// Load data\nconst AD_COUNT = 10;\n\nfetch('https://23.javascript.pages.academy/keksobooking/data')\n  .then((response) => response.json())\n  .then((ads) => {\n    addMarkers(\n      createMarkers(ads.slice(0, AD_COUNT)),\n    );\n    enablePage('map__filters');\n    filterAds(ads.slice());\n  })\n  .catch((err) => {\n    alert('Извините, мы не смогли загрузть данные о других объявлениях. ' + err);\n  })\n\n// send form data\n\nconst createFetch = (body, onSuccess, onError) => () => {\n  // добавить кастомные сообщения для разных ошибок\n  fetch('https://23.javascript.pages.academy/keksobooking',\n    {\n      method: 'POST',\n      credentials: 'same-origin',\n      body: new FormData(body),\n    },\n  )\n    .then((response) => {\n      if (response.ok) {\n        return response.json;\n      }\n\n      throw new Error(`${response.status} ${response.statusText}`);\n    })\n    .then((json) => onSuccess(json))\n    .catch((err) => onError(err))\n}\n\n\nexport {createFetch};\n","const createMessage = (type) => {\n  const main = document.querySelector('main');\n  let message = document.querySelector('#success').content.querySelector('.success').cloneNode(true);\n\n  if (type === 'error') {\n    message = document.querySelector('#error').content.querySelector('.error').cloneNode(true);\n  }\n\n  const onClickRemoveMessage = () => {\n    main.removeChild(message);\n    window.removeEventListener('click', onClickRemoveMessage);\n    window.removeEventListener('keydown', onKeyDownRemoveMessage);\n  }\n\n  const onKeyDownRemoveMessage = (evt) => {\n    if (evt.code === 'Escape') {\n      main.removeChild(message);\n      window.removeEventListener('keydown', onKeyDownRemoveMessage);\n      window.removeEventListener('click', onClickRemoveMessage);\n    }\n  }\n\n  main.appendChild(message);\n  window.addEventListener('click', onClickRemoveMessage);\n  window.addEventListener('keydown', onKeyDownRemoveMessage);\n}\nexport { createMessage };\n","const inputLengthValidation = (input, min, max) => {\n  if (input.value.length < min) {\n    input.setCustomValidity(`не хватает ${min - input.value.length} симв`);\n  } else if (input.value.length > max) {\n    input.setCustomValidity(`удалите лишние ${input.value.length - max} симв`);\n  } else {\n    input.setCustomValidity('');\n  }\n\n  input.reportValidity();\n}\n\n\n\nconst housingPriceValidation = (type, price, data, max) => {\n  price.setCustomValidity('');\n\n  if (price.value < data[type.value]) {\n    price.setCustomValidity(`Извините, но цена для этого типа жилья не может быть ниже ${data[type.value]}`);\n  }\n\n  if (price.value > max) {\n    price.setCustomValidity(`Извините, цена любого жилья не может превышать ${max}`);\n  }\n\n  price.reportValidity();\n};\n\n\n\nconst timeValidation = (timeIn, timeOut) => {\n  timeOut.setCustomValidity('');\n\n  if (timeIn.value !== timeOut.value) {\n    timeOut.setCustomValidity('Время заезда и выезда должны совпадать');\n  }\n\n  timeOut.reportValidity();\n}\n\n\n\nconst capacityValidation = (roomsNumber, guestsNumber) => {\n  const room = parseInt(roomsNumber.value);\n  const guest = parseInt(guestsNumber.value);\n  guestsNumber.setCustomValidity('');\n\n  if (room === 100 && guest !== 0) {\n    guestsNumber.setCustomValidity('Для 100 комнат подходит только вариант \"не для гостей\"');\n  }\n\n  if ((room !== 100) && (guest !== 0) && (guest > room)) {\n    guestsNumber.setCustomValidity('Число гостей не может превышать количество комнат');\n  }\n\n  if ((room !== 100) && (guest === 0)) {\n    guestsNumber.setCustomValidity('Вариант \"не для гостей\" подходит только для 100 комнат');\n  }\n\n  guestsNumber.reportValidity();\n}\n\n\n\nexport { inputLengthValidation, housingPriceValidation, timeValidation, capacityValidation };\n","const addImageUpload = (types, fileChooser, preview, insertMode) => {\n\n  fileChooser.addEventListener('change', () => {\n    const file = fileChooser.files[0];\n    const fileName = file.name.toLowerCase();\n\n    const matches = types.some((it) => {\n      return fileName.endsWith(it);\n    });\n\n    if (matches) {\n      const reader = new FileReader;\n\n      reader.addEventListener('load', () => {\n        if (insertMode === 'withBackground') {\n          preview.style.background = `#e4e4de center / contain no-repeat url(${reader.result})`;\n        } else {\n          preview.style.height = 'auto';\n          preview.src = reader.result;\n        }\n      });\n\n      reader.readAsDataURL(file);\n    }\n  });\n};\n\nexport {addImageUpload};\n","import { createFetch } from './fetch.js';\nimport { createMessage } from './notice.js';\nimport { returnMarkerToStart } from './map.js';\n\nimport {\n  inputLengthValidation,\n  housingPriceValidation,\n  timeValidation,\n  capacityValidation\n} from './validation.js';\n\nimport { addImageUpload } from './file-upload.js';\n\nconst form = document.querySelector('.ad-form');\n\nconst housingType = form.querySelector('#type');\nconst housingPrice = form.querySelector('#price');\n\n//AVATAR\n\nconst AVATAR_FILE_TYPES = ['gif', 'jpg', 'jpeg', 'png'];\n\nconst avatarChooser = form.querySelector('.ad-form__field input[type=file]');\nconst avatarPreview = form.querySelector('.ad-form-header__preview img');\n\naddImageUpload(AVATAR_FILE_TYPES, avatarChooser, avatarPreview, 'src');\n\n\n//HOUSING TYPE\n\nconst HOUSING_PRICES = {\n  bungalow: 0,\n  flat: 1000,\n  house: 5000,\n  palace: 10000,\n}\n\nconst MAX_PRICE = 1000000;\n\nconst setHousingPrice = () => {\n  housingPrice.placeholder = HOUSING_PRICES[housingType.value];\n  housingPrice.min = HOUSING_PRICES[housingType.value];\n}\n\nsetHousingPrice();\n\nhousingType.addEventListener('change', () => {\n  setHousingPrice();\n});\n\nhousingPrice.max = MAX_PRICE;\nhousingPrice.addEventListener('input', () => {\n  housingPriceValidation(housingType, housingPrice, HOUSING_PRICES, MAX_PRICE);\n});\n\n\n//TIME\n\nconst timeIn = form.querySelector('#timein');\nconst timeOut = form.querySelector('#timeout');\n\ntimeIn.addEventListener('change', () => {\n  timeOut.value = timeIn.value;\n});\n\ntimeOut.addEventListener('change', () => {\n  timeIn.value = timeOut.value;\n});\n\n\n//TITLE\n\nconst title = form.querySelector('#title');\nconst MIN_TITLE_LENGTH = 30;\nconst MAX_TITLE_LENGTH = 100;\n\ntitle.addEventListener('input', () => {\n  inputLengthValidation(title, MIN_TITLE_LENGTH, MAX_TITLE_LENGTH);\n});\n\n\n//CAPACITY\n\nconst roomsNumber = form.querySelector('#room_number');\nconst guestsNumber = form.querySelector('#capacity');\n\nconst setProperCapacity = () => {\n  for (let guest of guestsNumber.options) {\n    guest.value == 0 ? guest.setAttribute('disabled', 'true') : guest.removeAttribute('disabled');\n\n    if (roomsNumber.value == 100) {\n      guest.value == 0 ? guest.removeAttribute('disabled') : guest.setAttribute('disabled', 'true');\n    } else if (roomsNumber.value < guest.value) {\n      guest.setAttribute('disabled', 'true');\n    }\n  }\n};\n\nsetProperCapacity();\n\nroomsNumber.addEventListener('change', () => {\n  setProperCapacity();\n  capacityValidation(roomsNumber, guestsNumber);\n});\n\nguestsNumber.addEventListener('change', () => {\n  capacityValidation(roomsNumber, guestsNumber);\n});\n\n\n// ADDRESS\n\nconst address = form.querySelector('#address');\naddress.setAttribute('readonly', 'true');\n\n\n//HOUSING PHOTO\n\nconst PHOTO_FILE_TYPES = ['gif', 'jpg', 'jpeg', 'png'];\n\nconst photoChooser = form.querySelector('.ad-form__upload input[type=file]');\nconst photoPreview = form.querySelector('.ad-form__photo');\n\naddImageUpload(PHOTO_FILE_TYPES, photoChooser, photoPreview, 'withBackground');\n\n//SUBMIT\n\nconst fetchFormData = createFetch(\n  form,\n  (data) => {\n    form.reset();\n    returnMarkerToStart();\n    createMessage('success');\n  },\n  (err) => {\n    createMessage('error');\n  },\n);\n\nform.addEventListener('submit', (evt) => {\n  evt.preventDefault();\n  timeValidation(timeIn, timeOut);\n  capacityValidation(roomsNumber, guestsNumber);\n  if (form.reportValidity()) {\n    fetchFormData();\n  }\n});\n\n\n//RESET\n\nconst resetButton = form.querySelector('.ad-form__reset');\n\nresetButton.addEventListener('click', () => {\n  returnMarkerToStart();\n});\n\nexport { address };\n\n\n","const getRandomIntInclusive = (min, max) => {\n\n  if (min < 0 || max < 0) {\n    return -1;\n  }\n\n  if (min > max) {\n    [max, min] = [min, max];\n  }\n\n  return Math.floor(Math.random() * (max - min + 1) + min);\n};\n\nconst getRandomFloat = (min, max, decimal) => {\n  if (min < 0 || max < 0) {\n    return -1;\n  }\n\n  let base = Math.pow(10, decimal);\n\n  return getRandomIntInclusive(min * base, max * base) / base;\n};\n\nconst getRandomItems = (array) => {\n  let newArrayLength = getRandomIntInclusive(1, array.length);\n  let newArray = new Array(newArrayLength).fill(null);\n  let randomIndex = getRandomIntInclusive(0, array.length - 1);\n\n  for (let i = 0; i < newArray.length; i++) {\n    while (newArray.includes(array[randomIndex])) {\n      randomIndex = getRandomIntInclusive(0, array.length - 1);\n    }\n    newArray[i] = array[randomIndex];\n  }\n\n  return newArray;\n};\n\nconst addLeadingZero = (number) => {\n  return number < 10 ? '0' + String(number) : number;\n}\n\nconst limitDecimalPlaces = (item, count) => {\n  return parseInt(item * 10 ** count) / 10 ** count;\n};\n\nexport {getRandomIntInclusive, getRandomFloat, getRandomItems, addLeadingZero, limitDecimalPlaces};\n","import { enablePage } from './page-load.js';\nimport { address } from './form.js';\nimport { createOffer } from './offer.js';\n\nconst LAT = 35.60684;\nconst LNG = 139.74554\naddress.value = LAT + ', ' + LNG;\n\n// Create map\n\nconst map = L.map('map-canvas')\n  .on('load', () => {\n    enablePage('ad-form');\n  })\n  .setView({\n    lat: LAT,\n    lng: LNG,\n  }, 10);\n\nL.tileLayer(\n  'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',\n  {\n    attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',\n  },\n).addTo(map);\n\n\n// Create main marker\n\nconst mainPinIcon = L.icon({\n  iconUrl: '../leaflet/img/main-pin.svg',\n  iconSize: [52, 52],\n  iconAnchor: [26, 52],\n});\n\nconst mainMarker = L.marker(\n  {\n    lat: LAT,\n    lng: LNG,\n  },\n  {\n    draggable: true,\n    icon: mainPinIcon,\n  },\n);\n\nmainMarker.addTo(map);\n\nlet coordinates = {};\n\nmainMarker.on('moveend', (evt) => {\n  coordinates = evt.target.getLatLng();\n  address.value = (parseInt(coordinates.lat * 100000) / 100000) + ', ' + (parseInt(coordinates.lng * 100000) / 100000);\n});\n\nconst pinIcon = L.icon({\n  iconUrl: '../leaflet/img/pin.svg',\n  iconSize: [40, 40],\n  iconAnchor: [20, 40],\n});\n\n// Create other markers\n\nconst offerTemplate = document.querySelector('#card').content.querySelector('.popup');\n\nconst createMarkers = (ads) => {\n  let markers = [];\n\n  ads.forEach (ad => {\n    const lat = ad.location.lat;\n    const lng = ad.location.lng;\n    const marker = L.marker(\n      {\n        lat,\n        lng,\n      },\n      {\n        pinIcon,\n      },\n    );\n    const offerCard = offerTemplate.cloneNode(true);\n    createOffer(offerCard, ad);\n\n    marker\n\n      .bindPopup(offerCard,\n        {\n          keepInView: true,\n        },\n      );\n    markers.push(marker);\n  });\n\n  return markers;\n};\n\nlet markersGroup = L.layerGroup();\n\nconst addMarkers = (markers) => {\n  markersGroup = L.layerGroup(markers);\n  markersGroup.addTo(map);\n}\n\nconst removeMarkers = () => {\n  markersGroup.remove();\n}\n\nconst returnMarkerToStart = () => {\n  mainMarker.setLatLng(\n    {\n      lat: LAT,\n      lng: LNG,\n    },\n  );\n}\n\nexport {createMarkers, returnMarkerToStart, addMarkers, removeMarkers};\n","import { limitDecimalPlaces } from './util.js';\n\nconst translateHousingType = (data) => {\n  switch (data) {\n    case 'palace':\n      return 'Дворец';\n\n    case 'house':\n      return 'Дом';\n\n    case 'bungalow':\n      return 'Бунгало';\n\n    case 'flat':\n      return 'Квартира';\n\n    default:\n      return ''\n  }\n};\n\nconst addFeaturesToDom = (featuresList, data) => {\n  const fragment = document.createDocumentFragment();\n  data.forEach(item => {\n    const element = document.createElement('li');\n    element.classList.add('popup__feature');\n    element.classList.add('popup__feature--' + item);\n    fragment.appendChild(element);\n  });\n  featuresList.replaceChildren();\n  featuresList.appendChild(fragment);\n}\n\nconst addPhotosToDom = (photoContainer, data, card) => {\n  const fragment = document.createDocumentFragment();\n  const photo = card.querySelector('.popup__photo');\n  if (data) {\n    data.forEach(url => {\n      const photoElement = photo.cloneNode(true);\n      photoElement.src = url;\n      fragment.appendChild(photoElement);\n    });\n  } else {\n    photo.classList.add('visually-hidden');\n  }\n\n  photoContainer.replaceChildren();\n  photoContainer.appendChild(fragment);\n}\n\nconst createOffer = (card, {author, offer, location}) => {\n  const title = card.querySelector('.popup__title');\n  (offer.title) ? (title.textContent = offer.title) : (title.classList.add('visually-hidden'));\n\n  const address = card.querySelector('.popup__text--address');\n  const x = limitDecimalPlaces(location.lat, 5);\n  const y = limitDecimalPlaces(location.lng, 5);\n  (location.lat || location.lng) ? (address.textContent = x + ', ' + y) : (address.classList.add('visually-hidden'));\n\n  const housingType = card.querySelector('.popup__type');\n  (offer.type) ? (housingType.textContent = translateHousingType(offer.type)) : (housingType.classList.add('visually-hidden'));\n\n  const description = card.querySelector('.popup__description');\n  (description) ? (description.textContent = offer.description) : (description.classList.add('visually-hidden'));\n\n  const price = card.querySelector('.popup__text--price');\n  (offer.price) ? (price.textContent = offer.price + ' ₽/ночь') : (price.classList.add('visually-hidden'));\n\n  const capacity = card.querySelector('.popup__text--capacity');\n  (offer.rooms && offer.guests) ? (capacity.textContent = offer.rooms + ' комнаты для ' + offer.guests + ' гостей') : (capacity.classList.add('visually-hidden'));\n\n  const time = card.querySelector('.popup__text--time');\n  (offer.checkin && offer.checkout) ? (time.textContent = 'Заезд после ' + offer.checkin + ', выезд до ' + offer.checkout) : (time.classList.add('visually-hidden'));\n\n  const featuresList = card.querySelector('.popup__features');\n  (offer.features) ? (addFeaturesToDom(featuresList, offer.features)) : (featuresList.classList.add('visually-hidden'));\n\n  const photos = card.querySelector('.popup__photos');\n  addPhotosToDom(photos, offer.photos, card);\n\n  const picture = card.querySelector('.popup__avatar');\n  picture.src = author.avatar;\n  picture.onerror = function() {\n    picture.classList.add('visually-hidden');\n  }\n}\n\nexport { createOffer };\n"],"names":["disablePage","itemClass","item","document","querySelector","classList","add","child","children","setAttribute","enablePage","remove","removeAttribute","getArrayOfDuplicates","array1","array2","filter","includes","fetch","then","response","json","ads","addMarkers","createMarkers","slice","newArray","form","housingTypeArray","housingPriceArray","housingRoomsArray","housingGuestsArray","housingWithWifi","housingWithDishwasher","housingWithParking","housingWithWasher","housingWithElevator","housingWithConditioner","generalArrayOfFeatures","totalArray","featuresArray","result","cb","_","debounce","markers","removeMarkers","prepareMarkers","addEventListener","evt","filterCurrentFeatures","array","feature","offer","features","removeArray","baseArray","index","indexOf","splice","target","id","value","type","push","price","rooms","guests","matches","length","brokerArray","forEach","filterAds","catch","err","alert","createMessage","main","message","content","cloneNode","onClickRemoveMessage","removeChild","window","removeEventListener","onKeyDownRemoveMessage","code","appendChild","capacityValidation","roomsNumber","guestsNumber","room","parseInt","guest","setCustomValidity","reportValidity","addImageUpload","types","fileChooser","preview","insertMode","file","files","fileName","name","toLowerCase","some","it","endsWith","reader","FileReader","style","background","height","src","readAsDataURL","housingType","housingPrice","HOUSING_PRICES","bungalow","flat","house","palace","MAX_PRICE","setHousingPrice","placeholder","min","max","data","timeIn","timeOut","title","input","setProperCapacity","options","address","fetchFormData","body","onSuccess","reset","returnMarkerToStart","onError","method","credentials","FormData","ok","Error","status","statusText","preventDefault","timeValidation","limitDecimalPlaces","count","LAT","LNG","map","L","on","setView","lat","lng","tileLayer","attribution","addTo","mainPinIcon","icon","iconUrl","iconSize","iconAnchor","mainMarker","marker","draggable","coordinates","getLatLng","pinIcon","offerTemplate","ad","location","offerCard","card","author","textContent","x","y","translateHousingType","description","capacity","time","checkin","checkout","featuresList","fragment","createDocumentFragment","element","createElement","replaceChildren","photoContainer","photo","url","photoElement","addPhotosToDom","photos","picture","avatar","onerror","createOffer","bindPopup","keepInView","markersGroup","layerGroup","setLatLng"],"sourceRoot":""}